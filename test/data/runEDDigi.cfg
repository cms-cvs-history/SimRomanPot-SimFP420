process DigFP420Test = {
 ####### include services
### include "Configuration/ReleaseValidation/data/Services.cfi"

  ########## initialize  MessageLogger
 # include "FWCore/MessageLogger/data/MessageLogger.cfi"

   include "FWCore/MessageService/data/MessageLogger.cfi"
   replace MessageLogger.cerr.default.limit = 10




   service = RandomNumberGeneratorService
   {
      untracked uint32 sourceSeed = 123456789
      PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared = 98765432
	 untracked uint32 g4SimHits  = 11
	 untracked uint32 mix        = 12345   
      }
   }

        untracked PSet maxEvents = {untracked int32 input = 100}
############################################################
#The module which read from a Ntpl file
#    source = H2RootNtplSource
#    {
#    untracked vstring fileNames = {"file:edde-gb-gg.root"}
#    }
############################################################
         include "SimGeneral/HepPDTESSource/data/pdt.cfi"
        source = FlatRandomEGunSource {
                untracked PSet PGunParameters = {
                        untracked vint32 PartID = {2212}
                        untracked double MinEta = 8.7
                        untracked double MaxEta = 9.9
                        untracked double MinPhi = 3.053
                        untracked double MaxPhi = 3.227
                        untracked double MinE   = 7000.
                        untracked double MaxE   = 7000.
                }
                untracked int32 Verbosity = 0 # set to 1 (or greater)  for printouts
        }
############################################################


# Vertex smearing
#
# There're 3 types of Vertex smearing module (Gauss, Flat, BeamProfile);
# the cff's are available for each one :
#include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"
# Configuration/StandardSequences/data/VtxSmearedGauss.cff
# Configuration/StandardSequences/data/VtxSmearedNoSmear.cff
# Configuration/StandardSequences/data/VtxSmearedFlat.cff
# Configuration/StandardSequences/data/VtxSmearedBeamPreofile.cff
# Currently, we suggest using Gaussian vertex smearing

#        module VtxSmeared = VertexGenerator
#        {
#                string type = "IOMC/EventVertexGenerators/GaussianEventVertexGenerator"
#                double MeanX = -2.2    // in cm
#                double MeanY = 0.      // in cm
#                double MeanZ = -2500.0  // in cm
#                double SigmaX = 0.0015
#                double SigmaY = 0.0015
#                double SigmaZ = 10.0  // in cm (as in COBRA/OSCAR)
#        }

   #
   # Note : this module takes input in the usits of *cm* !!!
   #
   #
   # 2.2 is the center in X: -1.2 - 3.2
   # -2.3 -2.1  -0.1  0.1
   # -2.8 -1.6 -0.3 0.3

#module VtxSmeared = FlatEvtVtxGenerator
#{
#    using VtxSmearedCommon
#    using FlatVtxSmearingParameters
#}

include "Configuration/StandardSequences/data/VtxSmearedFlat.cff"
  replace FlatVtxSmearingParameters.MinX =  -1.5   // in cm -2.2
  replace FlatVtxSmearingParameters.MaxX =  -1.5   // in cm -2.2
  replace FlatVtxSmearingParameters.MinY =  0.0   // 
  replace FlatVtxSmearingParameters.MaxY =  0.0   // 
  replace FlatVtxSmearingParameters.MinZ =  41000.   //in cm -50.   40001. 
  replace FlatVtxSmearingParameters.MaxZ =  41000.   //in cm -50.   40001. 

# for 2 tracks study:
#      double MinZ = -2500.   // in cm 
#      double MaxZ = -2500.   // in cm 
###############################################
#
# Seeds start
        # Vtx Smearing
#include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"
#include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"
#include "Configuration/StandardSequences/data/VtxSmearedNoSmear.cff"
#include "Configuration/StandardSequences/data/VtxSmearedFlat.cff"
#include "Configuration/StandardSequences/data/VtxSmearedBeamProfile.cff"
###############################################
#



# Initialize geometry with XML files:
	#Geometry
        include "SimRomanPot/SimFP420/test/data/Test1GeometryXML.cfi"

# Initialize magnetic field: 
	#Magnetic Field
#	include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
# You can set Mag Field to 0
#
#include "Configuration/StandardSequences/data/UseZeroBField.cff"



# Seeds end
#


  include "SimGeneral/MixingModule/data/mixNoPU.cfi"
#  include "SimRomanPot/SimFP420/data/FP420Digi.cfi"
  include "SimRomanPot/SimFP420/test/data/FP420Digi.cfi"
#
###############################################   
        module o1 = PoolOutputModule {untracked string fileName ="test1event.root"} 
#                                        $PWD/
       include "SimG4Core/Application/data/g4SimHits.cfi"
#        include "SimRomanPot/SimFP420/test/data/SimG4Object.cfi"
#       include "SimRomanPot/SimFP420/test/data/g4SimHits.cfi"

###############################################   
#         replace g4SimHits.NonBeamEvent = true
         replace g4SimHits.UseMagneticField = false
#         replace g4SimHits.Physics.DefaultCutValue = 1000.
          replace g4SimHits.Generator.ApplyPtCuts =  false
          replace g4SimHits.Generator.ApplyPhiCuts =  true
          replace g4SimHits.Generator.ApplyEtaCuts =  false
###############################################   



   path p1 = {  VtxSmeared, g4SimHits, mix, FP420Digi }

  schedule = {p1, outpath}
 
	endpath outpath = { o1 }

	service = Timing {}
	service = Tracer {}
}		
###############################################
